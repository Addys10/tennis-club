<div class="container">
  <div class="form-wrapper">
    <h1 class="form-title">Nový trénink</h1>

    <form [formGroup]="trainingForm" (ngSubmit)="onSubmit()">
      <!-- Error message -->
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <!-- Coach selection -->
      <div class="form-group">
        <label class="form-label">Trenér</label>
        <select formControlName="coachId" class="form-control">
          <option value="">Vyberte trenéra</option>
          <option *ngFor="let coach of coaches" [value]="coach.id">
            {{coach.firstName}} {{coach.lastName}}
          </option>
        </select>
        <div *ngIf="submitted && trainingForm.get('coachId')?.errors" class="validation-error">
          Vyberte trenéra
        </div>
      </div>

      <!-- Court selection -->
      <div class="form-group">
        <label class="form-label">Kurt</label>
        <select formControlName="courtId" class="form-control">
          <option value="">Vyberte kurt</option>
          <option *ngFor="let court of courts" [value]="court.id">
            {{court.name}}
          </option>
        </select>
        <div *ngIf="submitted && trainingForm.get('courtId')?.errors" class="validation-error">
          Vyberte kurt
        </div>
      </div>

      <!-- Date and time -->
      <div class="date-time-group">
        <div class="form-group">
          <label class="form-label">Začátek</label>
          <input type="datetime-local" formControlName="startTime" class="form-control">
        </div>
        <div class="form-group">
          <label class="form-label">Konec</label>
          <input type="datetime-local" formControlName="endTime" class="form-control">
        </div>
      </div>

      <!-- Players -->
      <div class="form-group">
        <label class="form-label">Hráči</label>
        <select multiple formControlName="playerIds" class="form-control">
          <option *ngFor="let player of players" [value]="player.id">
            {{player.firstName}} {{player.lastName}}
          </option>
        </select>
      </div>

      <!-- Price -->
      <div class="form-group">
        <label class="form-label">Cena za osobu</label>
        <div class="price-input">
          <input type="number" formControlName="price" class="form-control">
        </div>
      </div>

      <!-- Notes -->
      <div class="form-group">
        <label class="form-label">Poznámky</label>
        <textarea formControlName="notes" class="form-control" rows="3"></textarea>
      </div>

      <!-- Buttons -->
      <div class="btn-group">
        <button type="button" class="btn btn-cancel" routerLink="/trainings">
          Zrušit
        </button>
        <button type="submit" class="btn btn-submit" [disabled]="loading">
          <span *ngIf="loading" class="spinner"></span>
          {{ loading ? 'Ukládám...' : 'Vytvořit trénink' }}
        </button>
      </div>
    </form>
  </div>
</div>
